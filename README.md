# 🎾 网球场预约监控插件

一个专为CSU网球场预约系统设计的Chrome浏览器扩展，能够自动监控场地可预约状态，及时发送桌面通知，帮助用户快速获取理想的预约时段。

## ✨ 主要功能

### 🔔 智能监控通知
- **自动刷新检测**：定期刷新页面获取最新场地状态
- **桌面通知**：发现可预约时段时立即发送系统通知
- **智能防干扰**：检测用户活动，活跃时暂停自动刷新
- **误报防护**：多重验证机制，避免"已选择"状态误报

### 📅 日期选择功能
- **今天/明天监控**：可选择监控今天或明天的场地状态
- **自动日期切换**：监控明天时自动点击"后一天"按钮
- **灵活配置**：界面直观，随时切换监控日期

### 📊 监控统计
- **监测次数统计**：记录自动监测次数（浏览器重启归零）
- **实时状态显示**：显示监控状态、最后检查时间等
- **自定义间隔**：支持设置检查间隔（30秒-10分钟）

## 🚀 安装使用

### 安装步骤
1. 下载插件文件到本地文件夹并解压
   
3. 打开Chrome浏览器，进入 `chrome://extensions/`
4. 开启右上角的"开发者模式"
5. 点击"加载已解压的扩展程序"
6. 选择插件文件夹完成安装

### 使用方法
1. **打开目标页面**：访问网球场预约网站
2. **设置监控参数**：
   - 选择监控日期（今天/明天）
   - 设置检查间隔（推荐2-5分钟）
3. **启动监控**：点击插件图标，选择"开始监控"
4. **接收通知**：发现可预约时段时会收到桌面通知

## ⚙️ 配置参数

### 监控设置
- **监控日期**：`today`（今天）或 `tomorrow`（明天）
- **检查间隔**：30秒到10分钟，推荐设置为2-5分钟
- **用户活动检测**：检测到用户活动后暂停刷新30秒

### 检测逻辑
- **关键词检测**：搜索"可预约"、"可约"等关键词
- **排除词过滤**：排除"不可预约"、"已预约"、"已选择"等状态
- **内容验证**：验证包含时间段或场地信息的有效预约
- **重试机制**：失败时自动重试，最多3次

## 🧪 调试测试

### 本地测试页面
提供两个测试页面：
- `simple-test.html`：基础测试功能
- `simple-test-new.html`：增强版，支持日期切换和状态模拟

### 测试功能
- **日期切换**：测试"今天"/"明天"日期选择功能
- **状态模拟**：模拟各种可预约状态和混合状态
- **实时日志**：显示插件检测过程和结果
- **场景模拟**：模拟真实的预约场景

### 调试步骤
1. 打开测试页面：`file:///path/to/simple-test-new.html`
2. 点击"添加可预约时段"按钮
3. 在插件中选择监控日期并启动监控
4. 观察插件是否正确检测并发送通知

## 📋 界面说明

### 弹窗界面布局
```
监控日期：[今天 ▼]     # 日期选择下拉框
检查间隔：[120] 秒      # 间隔设置
监测次数：3 次          # 统计显示
最后检查：14:23:45      # 状态显示

[开始监控] [停止监控]    # 控制按钮
[测试通知]              # 测试功能
```

### 状态指示
- **绿色徽章 "ON"**：监控运行中
- **无徽章**：监控已停止
- **通知计数**：显示发现的可预约时段数量

## 🔧 技术特点

### 核心优化
- **脚本注入优化**：移除可能导致兼容性问题的参数
- **异步处理**：完善的async/await错误处理
- **内存管理**：合理的定时器和事件监听器管理
- **权限控制**：最小化权限需求，支持所有URL

### 兼容性
- **Chrome版本**：支持Chrome 88+（Manifest V3）
- **页面兼容**：支持各种网球场预约网站  
- **本地测试**：支持本地HTML文件调试

## 📝 更新日志
### v1.4.0 (2025-7-3)
- ✅ 误报检测优化
- ✅ 用户活动检测
- ✅ 检查间隔动态调整
- ✅ 测试页面完善

## 📞 技术支持

如遇到问题或需要新功能，请联系cxy791111793@gmail.com


## 📄 许可证
本项目仅供学习和个人使用，请遵守相关网站的使用条款。
