# 🎾 网球场预约监控插件

一个专为CSU网球场预约系统设计的Chrome浏览器扩展，能够自动监控场地可预约状态，及时发送桌面通知，帮助用户快速获取理想的预约时段。

## ✨ 主要功能

### 🔔 智能监控通知
- **自动刷新检测**：定期刷新页面获取最新场地状态
- **桌面通知**：发现可预约时段时立即发送系统通知
- **智能防干扰**：检测用户活动，活跃时暂停自动刷新
- **误报防护**：多重验证机制，避免"已选择"状态误报

### 📅 日期选择功能
- **今天/明天监控**：可选择监控今天或明天的场地状态
- **自动日期切换**：监控明天时自动点击"后一天"按钮
- **灵活配置**：界面直观，随时切换监控日期

### 📊 监控统计
- **监测次数统计**：记录自动监测次数（浏览器重启归零）
- **实时状态显示**：显示监控状态、最后检查时间等
- **自定义间隔**：支持设置检查间隔（30秒-10分钟）

## 🚀 安装使用

### 安装步骤
1. 下载插件文件到本地文件夹并解压（文件地址https://github.com/Tim-US/CSU-Tennis-Appointment-Assistant/releases/download/v1.4/v1.4.zip）
2. 打开Chrome浏览器，进入 `chrome://extensions/`
![image](https://github.com/user-attachments/assets/41e582c8-a035-41f7-805a-a7d61dd020e3)
4. 开启右上角的"开发者模式"
5. 点击"加载已解压的扩展程序"
6. 选择插件文件夹完成安装，确保插件开启

![image](https://github.com/user-attachments/assets/87bf91df-2f69-47a2-8076-99b2499a5502)

7.点击Chrome扩展程序，将网球小助手固定（方便后续操作）

![image](https://github.com/user-attachments/assets/53c6925c-7453-4404-ae9e-efba8ccde303)

Chrome扩展程序的入口也可能在右侧三个点里面，根据版本自行寻找

### 使用方法
1. **打开目标页面**：访问网球场预约网站（地址:https://ehall.csu.edu.cn/v2/reserve/reserveDetail?id=57）
2. **设置监控参数**：
   - 选择监控日期（今天/明天）
   - 设置检查间隔（推荐1-2分钟,减少学校服务器压力）（网络通畅的情况下插件进行一套查询流程耗时7s）
   ![image](https://github.com/user-attachments/assets/7aed430b-5d2e-4f3c-bcfa-37b229b58a60)

3. **启动监控**：点击插件图标，选择"开始监控"
4. **通知测试**：点击小助手的“测试通知”，会出现两个通知（一个主用一个备用，实际运行只发一次）

![image](https://github.com/user-attachments/assets/f28381ca-9763-4434-814e-cd8d6ae2ce30)

如果没收到通知，优先检查是否Windows系统设置是否开启浏览器通知权限，然后检查插件是否授予通知权限（右键插件，管理扩展程序）

![image](https://github.com/user-attachments/assets/1bca434d-ca35-44dd-bb14-9984ae8372a5)

5. **接收通知**：发现可预约时段时会收到桌面通知

### 核心优化
- **脚本注入优化**：移除可能导致兼容性问题的参数
- **异步处理**：完善的async/await错误处理
- **内存管理**：合理的定时器和事件监听器管理
- **权限控制**：最小化权限需求，支持所有URL

### 兼容性
- **Chrome版本**：支持Chrome 88+（Manifest V3）
- **页面兼容**：支持各种网球场预约网站  
- **本地测试**：支持本地HTML文件调试

## 📝 更新日志
### v1.4.0 (2025-7-3)
- ✅ 误报检测优化
- ✅ 用户活动检测
- ✅ 检查间隔动态调整
- ✅ 测试页面完善

## 📞 技术支持

如遇到问题或需要新功能，请联系cxy791111793@gmail.com


## 📄 许可证
本项目仅供学习和个人使用，请遵守相关网站的使用条款。
